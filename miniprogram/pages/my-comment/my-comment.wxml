<navigation-bar title="我的评论" back="{{true}}" color="black" background="#FFF"></navigation-bar>

<view class="page">
  <scroll-view
    class="scroll"
    scroll-y="{{true}}"
    lower-threshold="{{120}}"
    bindscrolltolower="onScrollToLower"
    refresher-enabled="{{true}}"
    refresher-triggered="{{refreshing}}"
    bindrefresherrefresh="onRefresherRefresh"
  >
    <view class="content">
      <block wx:if="{{loading}}">
        <view class="skeleton-card" wx:for="{{[1,2,3]}}" wx:key="*this">
          <view class="skeleton-line title"></view>
          <view class="skeleton-line"></view>
          <view class="skeleton-line short"></view>
        </view>
      </block>

      <block wx:elif="{{comments.length === 0}}">
        <van-empty description="你还没有发布评论" />
      </block>

      <block wx:else>
        <view
          class="comment-card"
          wx:for="{{comments}}"
          wx:key="id"
          data-question-id="{{item.questionId}}"
          bindtap="onCommentTap"
        >
          <text class="content-text">{{item.content}}</text>
          <view class="meta-row">
            <text class="meta">题目ID {{item.questionId}}</text>
            <text class="meta">{{item.createTimeText}}</text>
            <text class="meta">赞 {{item.likeCount}}</text>
          </view>
        </view>

        <view class="list-footer">
          <text wx:if="{{loadingMore}}" class="footer-text">加载中...</text>
          <text wx:elif="{{!hasMore}}" class="footer-text">没有更多了</text>
        </view>
      </block>
    </view>
  </scroll-view>
</view>
